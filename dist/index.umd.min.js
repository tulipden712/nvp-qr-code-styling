!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).foo={})}(this,(function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;arguments.length>r;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function n(){n=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=Object.create((e&&e.prototype instanceof w?e:w).prototype),a=new I(n||[]);return i(o,"_invoke",{value:C(t,r,a)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",v="suspendedYield",g="executing",p="completed",y={};function w(){}function _(){}function m(){}var x={};h(x,s,(function(){return this}));var b=Object.getPrototypeOf,M=b&&b(b(A([])));M&&M!==r&&o.call(M,s)&&(x=M);var k=m.prototype=w.prototype=Object.create(x);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(n,i,a,s){var c=d(t[n],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function C(e,r,n){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=O(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var u=d(e,r,n);if("normal"===u.type){if(o=n.done?p:v,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return _.prototype=m,i(k,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:_,configurable:!0}),_.displayName=h(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},S(P.prototype),h(P.prototype,c,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(k),h(k,u,"Generator"),h(k,s,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(z),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(this.prev>=a.tryLoc){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(a.catchLoc>this.prev)return n(a.catchLoc,!0);if(a.finallyLoc>this.prev)return n(a.finallyLoc)}else if(c){if(a.catchLoc>this.prev)return n(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(a.finallyLoc>this.prev)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(this.prev>=n.tryLoc&&o.call(n,"finallyLoc")&&n.finallyLoc>this.prev){var i=n;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),z(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;z(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,c,"next",t)}function c(t){i(a,n,o,s,c,"throw",t)}s(void 0)}))}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;e.length>r;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function u(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);e>r;r++)n[r]=t[r];return n}function f(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}var v={numeric:"Numeric",alphanumeric:"Alphanumeric",byte:"Byte",kanji:"Kanji"};var g=function(t){return!!t&&"object"===o(t)&&!Array.isArray(t)};function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;e>o;o++)n[o-1]=arguments[o];if(!n.length)return t;var i=n.shift();return void 0!==i&&g(t)&&g(i)?(t=r({},t),Object.keys(i).forEach((function(e){var r=t[e],n=i[e];t[e]=Array.isArray(r)&&Array.isArray(n)?n:g(r)&&g(n)?p(Object.assign({},r),n):n})),p.apply(void 0,[t].concat(n))):t}function y(t,e){var r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}function w(t){var e=t.originalHeight,r=t.originalWidth,n=t.maxHiddenDots,o=t.maxHiddenAxisDots,i=t.dotSize,a={x:0,y:0},s={x:0,y:0};if(!(e>0&&r>0&&n>0&&i>0))return{height:0,width:0,hideYDots:0,hideXDots:0};var c=e/r;return a.x=Math.floor(Math.sqrt(n/c)),a.x>0||(a.x=1),o&&a.x>o&&(a.x=o),a.x%2==0&&a.x--,s.x=a.x*i,a.y=1+2*Math.ceil((a.x*c-1)/2),s.y=Math.round(s.x*c),(a.y*a.x>n||o&&a.y>o)&&(o&&a.y>o?(a.y=o,a.y%2==0&&a.x--):a.y-=2,s.y=a.y*i,a.x=1+2*Math.ceil((a.y/c-1)/2),s.x=Math.round(s.y/c)),{height:s.y,width:s.x,hideYDots:a.y,hideXDots:a.x}}for(var _={L:.07,M:.15,Q:.25,H:.3},m={dots:"dots",rounded:"rounded",classy:"classy",classyRounded:"classy-rounded",square:"square",extraRounded:"extra-rounded"},x=function(){function t(e){var r=e.context,n=e.type;s(this,t),this._context=void 0,this._type=void 0,this._context=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o,i=this._context;switch(this._type){case m.dots:o=this._drawDot;break;case m.classy:o=this._drawClassy;break;case m.classyRounded:o=this._drawClassyRounded;break;case m.rounded:o=this._drawRounded;break;case m.extraRounded:o=this._drawExtraRounded;break;default:o=this._drawSquare}o.call(this,{x:t,y:e,size:r,context:i,getNeighbor:n})}},{key:"_rotateFigure",value:function(t){var e=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,i=t.draw,a=t.x+e/2,s=t.y+e/2;r.translate(a,s),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-s)}},{key:"_basicDot",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.rect(-e/2,-e/2,e,e)}}))}},{key:"_basicSideRounded",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,-Math.PI/2,Math.PI/2),n.lineTo(-e/2,e/2),n.lineTo(-e/2,-e/2),n.lineTo(0,-e/2)}}))}},{key:"_basicCornerRounded",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,-Math.PI/2,0),n.lineTo(e/2,e/2),n.lineTo(-e/2,e/2),n.lineTo(-e/2,-e/2),n.lineTo(0,-e/2)}}))}},{key:"_basicCornerExtraRounded",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(-e/2,e/2,e,-Math.PI/2,0),n.lineTo(-e/2,e/2),n.lineTo(-e/2,-e/2)}}))}},{key:"_basicCornersRounded",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,-Math.PI/2,0),n.lineTo(e/2,e/2),n.lineTo(0,e/2),n.arc(0,0,e/2,Math.PI/2,Math.PI),n.lineTo(-e/2,-e/2),n.lineTo(0,-e/2)}}))}},{key:"_basicCornersExtraRounded",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(-e/2,e/2,e,-Math.PI/2,0),n.arc(e/2,-e/2,e,Math.PI/2,Math.PI)}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,context:t.context,rotation:0})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,context:t.context,rotation:0})}},{key:"_drawRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,c=i?+i(0,-1):0,u=i?+i(0,1):0,h=a+s+c+u;if(0!==h)if(h>2||a&&s||c&&u)this._basicSquare({x:e,y:r,size:n,context:o,rotation:0});else{if(2===h){var l=0;return a&&c?l=Math.PI/2:c&&s?l=Math.PI:s&&u&&(l=-Math.PI/2),void this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:l})}if(1===h){var d=0;return c?d=Math.PI/2:s?d=Math.PI:u&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,context:o,rotation:d})}}else this._basicDot({x:e,y:r,size:n,context:o,rotation:0})}},{key:"_drawExtraRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,c=i?+i(0,-1):0,u=i?+i(0,1):0,h=a+s+c+u;if(0!==h)if(h>2||a&&s||c&&u)this._basicSquare({x:e,y:r,size:n,context:o,rotation:0});else{if(2===h){var l=0;return a&&c?l=Math.PI/2:c&&s?l=Math.PI:s&&u&&(l=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:l})}if(1===h){var d=0;return c?d=Math.PI/2:s?d=Math.PI:u&&(d=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,context:o,rotation:d})}}else this._basicDot({x:e,y:r,size:n,context:o,rotation:0})}},{key:"_drawClassy",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,c=i?+i(0,-1):0,u=i?+i(0,1):0;0!==a+s+c+u?a||c?s||u?this._basicSquare({x:e,y:r,size:n,context:o,rotation:0}):this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:r,size:n,context:o,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2})}},{key:"_drawClassyRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.context,i=t.getNeighbor,a=i?+i(-1,0):0,s=i?+i(1,0):0,c=i?+i(0,-1):0,u=i?+i(0,1):0;0!==a+s+c+u?a||c?s||u?this._basicSquare({x:e,y:r,size:n,context:o,rotation:0}):this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:r,size:n,context:o,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,context:o,rotation:Math.PI/2})}}]),t}(),b={dot:"dot",square:"square",extraRounded:"extra-rounded"},M=function(){function t(e){var r=e.context,n=e.type;s(this,t),this._context=void 0,this._type=void 0,this._context=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o,i=this._context;switch(this._type){case b.square:o=this._drawSquare;break;case b.extraRounded:o=this._drawExtraRounded;break;default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,context:i,rotation:n})}},{key:"_rotateFigure",value:function(t){var e=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,i=t.draw,a=t.x+e/2,s=t.y+e/2;r.translate(a,s),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-s)}},{key:"_basicDot",value:function(t){var e=t.size,n=t.context,o=e/7;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,0,2*Math.PI),n.arc(0,0,e/2-o,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(t){var e=t.size,n=t.context,o=e/7;this._rotateFigure(r(r({},t),{},{draw:function(){n.rect(-e/2,-e/2,e,e),n.rect(-e/2+o,-e/2+o,e-2*o,e-2*o)}}))}},{key:"_basicExtraRounded",value:function(t){var e=t.context,n=t.size/7;this._rotateFigure(r(r({},t),{},{draw:function(){e.arc(-n,-n,2.5*n,Math.PI,-Math.PI/2),e.lineTo(n,-3.5*n),e.arc(n,-n,2.5*n,-Math.PI/2,0),e.lineTo(3.5*n,-n),e.arc(n,n,2.5*n,0,Math.PI/2),e.lineTo(-n,3.5*n),e.arc(-n,n,2.5*n,Math.PI/2,Math.PI),e.lineTo(-3.5*n,-n),e.arc(-n,-n,1.5*n,Math.PI,-Math.PI/2),e.lineTo(n,-2.5*n),e.arc(n,-n,1.5*n,-Math.PI/2,0),e.lineTo(2.5*n,-n),e.arc(n,n,1.5*n,0,Math.PI/2),e.lineTo(-n,2.5*n),e.arc(-n,n,1.5*n,Math.PI/2,Math.PI),e.lineTo(-2.5*n,-n)}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,context:t.context,rotation:t.rotation})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,context:t.context,rotation:t.rotation})}},{key:"_drawExtraRounded",value:function(t){this._basicExtraRounded({x:t.x,y:t.y,size:t.size,context:t.context,rotation:t.rotation})}}]),t}(),k={dot:"dot",square:"square"},S=function(){function t(e){var r=e.context,n=e.type;s(this,t),this._context=void 0,this._type=void 0,this._context=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o;if(this._type===k.square)o=this._drawSquare;else o=this._drawDot;o.call(this,{x:t,y:e,size:r,context:this._context,rotation:n})}},{key:"_rotateFigure",value:function(t){var e=t.size,r=t.context,n=t.rotation,o=void 0===n?0:n,i=t.draw,a=t.x+e/2,s=t.y+e/2;r.translate(a,s),o&&r.rotate(o),i(),r.closePath(),o&&r.rotate(-o),r.translate(-a,-s)}},{key:"_basicDot",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.arc(0,0,e/2,0,2*Math.PI)}}))}},{key:"_basicSquare",value:function(t){var e=t.size,n=t.context;this._rotateFigure(r(r({},t),{},{draw:function(){n.rect(-e/2,-e/2,e,e)}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,context:t.context,rotation:t.rotation})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,context:t.context,rotation:t.rotation})}}]),t}(),P="radial",C=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],O=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],D=function(){function t(e){s(this,t),this._canvas=void 0,this._options=void 0,this._qr=void 0,this._image=void 0,this._canvas=document.createElement("canvas"),this._canvas.width=e.width,this._canvas.height=e.height,this._options=e}var e;return u(t,[{key:"context",get:function(){return this._canvas.getContext("2d")}},{key:"width",get:function(){return this._canvas.width}},{key:"height",get:function(){return this._canvas.height}},{key:"getCanvas",value:function(){return this._canvas}},{key:"clear",value:function(){var t=this.context;t&&t.clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"drawQR",value:(e=a(n().mark((function t(e){var r,o,i,a,s=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.getModuleCount(),o=Math.floor((Math.min(this._options.width,this._options.height)-2*this._options.margin)/r),i={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=e,!this._options.image){t.next=14;break}return t.next=8,this.loadImage();case 8:if(this._image){t.next=10;break}return t.abrupt("return");case 10:i=w({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:Math.floor((a=this._options).imageOptions.imageSize*_[a.qrOptions.errorCorrectionLevel]*r*r),maxHiddenAxisDots:r-14,dotSize:o});case 14:this.clear(),this.drawBackground(),this.drawDots((function(t,e){var n,o,a,c,u,h;return!(s._options.imageOptions.hideBackgroundDots&&t>=(r-i.hideXDots)/2&&(r+i.hideXDots)/2>t&&e>=(r-i.hideYDots)/2&&(r+i.hideYDots)/2>e||(null===(n=C[t])||void 0===n?void 0:n[e])||(null===(o=C[t-r+7])||void 0===o?void 0:o[e])||(null===(a=C[t])||void 0===a?void 0:a[e-r+7])||(null===(c=O[t])||void 0===c?void 0:c[e])||(null===(u=O[t-r+7])||void 0===u?void 0:u[e])||(null===(h=O[t])||void 0===h?void 0:h[e-r+7]))})),this.drawCorners(),this._options.image&&this.drawImage({width:i.width,height:i.height,count:r,dotSize:o});case 19:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"drawBackground",value:function(){var t=this.context,e=this._options;if(t){if(e.backgroundOptions.gradient){var r=e.backgroundOptions.gradient,n=this._createGradient({context:t,options:r,additionalRotation:0,x:0,y:0,size:this._canvas.width>this._canvas.height?this._canvas.width:this._canvas.height});r.colorStops.forEach((function(t){n.addColorStop(t.offset,t.color)})),t.fillStyle=n}else e.backgroundOptions.color&&(t.fillStyle=e.backgroundOptions.color);t.fillRect(0,0,this._canvas.width,this._canvas.height)}}},{key:"drawDots",value:function(t){var e=this;if(!this._qr)throw"QR code is not defined";var r=this.context;if(!r)throw"QR code is not defined";var n=this._options,o=this._qr.getModuleCount();if(o>n.width||o>n.height)throw"The canvas is too small.";var i=Math.floor((Math.min(n.width,n.height)-2*n.margin)/o),a=Math.floor((n.width-o*i)/2),s=Math.floor((n.height-o*i)/2),c=new x({context:r,type:n.dotsOptions.type});r.beginPath();for(var u=function(r){for(var n=function(n){return t&&!t(r,n)?0:e._qr.isDark(r,n)?void c.draw(a+r*i,s+n*i,i,(function(i,a){return r+i>=0&&n+a>=0&&o>r+i&&o>n+a&&(!(t&&!t(r+i,n+a))&&(!!e._qr&&e._qr.isDark(r+i,n+a)))})):0},u=0;o>u;u++)n(u)},h=0;o>h;h++)u(h);if(n.dotsOptions.gradient){var l=n.dotsOptions.gradient,d=this._createGradient({context:r,options:l,additionalRotation:0,x:a,y:s,size:o*i});l.colorStops.forEach((function(t){d.addColorStop(t.offset,t.color)})),r.fillStyle=r.strokeStyle=d}else n.dotsOptions.color&&(r.fillStyle=r.strokeStyle=n.dotsOptions.color);r.fill("evenodd")}},{key:"drawCorners",value:function(t){var e=this;if(!this._qr)throw"QR code is not defined";var r=this.context;if(!r)throw"QR code is not defined";var n=this._options,o=this._qr.getModuleCount(),i=Math.floor((Math.min(n.width,n.height)-2*n.margin)/o),a=7*i,s=3*i,c=Math.floor((n.width-o*i)/2),u=Math.floor((n.height-o*i)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(h){var d,f,v,g,p,y,w=l(h,3),_=w[0],m=w[1],b=w[2];if(!t||t(_,m)){var k=c+_*i*(o-7),P=u+m*i*(o-7);if(null===(d=n.cornersSquareOptions)||void 0===d?void 0:d.type){var D,z=new M({context:r,type:null===(D=n.cornersSquareOptions)||void 0===D?void 0:D.type});r.beginPath(),z.draw(k,P,a,b)}else{var I=new x({context:r,type:n.dotsOptions.type});r.beginPath();for(var A=function(t){for(var e=function(e){var r;if(!(null===(r=C[t])||void 0===r?void 0:r[e]))return 1;I.draw(k+t*i,P+e*i,i,(function(r,n){var o;return!!(null===(o=C[t+r])||void 0===o?void 0:o[e+n])}))},r=0;C[t].length>r;r++)e(r)},q=0;C.length>q;q++)A(q)}if(null===(f=n.cornersSquareOptions)||void 0===f?void 0:f.gradient){var R=n.cornersSquareOptions.gradient,E=e._createGradient({context:r,options:R,additionalRotation:b,x:k,y:P,size:a});R.colorStops.forEach((function(t){E.addColorStop(t.offset,t.color)})),r.fillStyle=r.strokeStyle=E}else(null===(v=n.cornersSquareOptions)||void 0===v?void 0:v.color)&&(r.fillStyle=r.strokeStyle=n.cornersSquareOptions.color);if(r.fill("evenodd"),null===(g=n.cornersDotOptions)||void 0===g?void 0:g.type){var L,B=new S({context:r,type:null===(L=n.cornersDotOptions)||void 0===L?void 0:L.type});r.beginPath(),B.draw(k+2*i,P+2*i,s,b)}else{var T=new x({context:r,type:n.dotsOptions.type});r.beginPath();for(var N=function(t){for(var e=function(e){var r;if(!(null===(r=O[t])||void 0===r?void 0:r[e]))return 1;T.draw(k+t*i,P+e*i,i,(function(r,n){var o;return!!(null===(o=O[t+r])||void 0===o?void 0:o[e+n])}))},r=0;O[t].length>r;r++)e(r)},j=0;O.length>j;j++)N(j)}if(null===(p=n.cornersDotOptions)||void 0===p?void 0:p.gradient){var F=n.cornersDotOptions.gradient,Q=e._createGradient({context:r,options:F,additionalRotation:b,x:k+2*i,y:P+2*i,size:s});F.colorStops.forEach((function(t){Q.addColorStop(t.offset,t.color)})),r.fillStyle=r.strokeStyle=Q}else(null===(y=n.cornersDotOptions)||void 0===y?void 0:y.color)&&(r.fillStyle=r.strokeStyle=n.cornersDotOptions.color);r.fill("evenodd")}}))}},{key:"loadImage",value:function(){var t=this;return new Promise((function(e,r){var n=t._options,o=new Image;if(!n.image)return r("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(o.crossOrigin=n.imageOptions.crossOrigin),t._image=o,o.onload=function(){e()},o.src=n.image}))}},{key:"drawImage",value:function(t){var e=t.width,r=t.height,n=t.count,o=t.dotSize,i=this.context;if(!i)throw"canvasContext is not defined";if(!this._image)throw"image is not defined";var a=this._options,s=e-2*a.imageOptions.margin,c=r-2*a.imageOptions.margin;i.drawImage(this._image,Math.floor((a.width-n*o)/2)+a.imageOptions.margin+(n*o-e)/2,Math.floor((a.height-n*o)/2)+a.imageOptions.margin+(n*o-r)/2,0>s?0:s,0>c?0:c)}},{key:"_createGradient",value:function(t){var e,r=t.context,n=t.options,o=t.additionalRotation,i=t.x,a=t.y,s=t.size;if(n.type===P)e=r.createRadialGradient(i+s/2,a+s/2,0,i+s/2,a+s/2,s/2);else{var c=((n.rotation||0)+o)%(2*Math.PI),u=(c+2*Math.PI)%(2*Math.PI),h=i+s/2,l=a+s/2,d=i+s/2,f=a+s/2;u>=0&&.25*Math.PI>=u||u>1.75*Math.PI&&2*Math.PI>=u?(h-=s/2,l-=s/2*Math.tan(c),d+=s/2,f+=s/2*Math.tan(c)):u>.25*Math.PI&&.75*Math.PI>=u?(l-=s/2,h-=s/2/Math.tan(c),f+=s/2,d+=s/2/Math.tan(c)):u>.75*Math.PI&&1.25*Math.PI>=u?(h+=s/2,l+=s/2*Math.tan(c),d-=s/2,f-=s/2*Math.tan(c)):u>1.25*Math.PI&&1.75*Math.PI>=u&&(l+=s/2,h+=s/2/Math.tan(c),f-=s/2,d-=s/2/Math.tan(c)),e=r.createLinearGradient(Math.round(h),Math.round(l),Math.round(d),Math.round(f))}return e}}]),t}(),z=function(){function t(e){var r=e.svg,n=e.type;s(this,t),this._element=void 0,this._svg=void 0,this._type=void 0,this._svg=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o;switch(this._type){case m.dots:o=this._drawDot;break;case m.classy:o=this._drawClassy;break;case m.classyRounded:o=this._drawClassyRounded;break;case m.rounded:o=this._drawRounded;break;case m.extraRounded:o=this._drawExtraRounded;break;default:o=this._drawSquare}o.call(this,{x:t,y:e,size:r,getNeighbor:n})}},{key:"_rotateFigure",value:function(t){var e,r=t.size,n=t.rotation,o=void 0===n?0:n,i=t.x+r/2,a=t.y+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate(".concat(180*o/Math.PI,",").concat(i,",").concat(a,")"))}},{key:"_basicDot",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",o+n/2+""),e._element.setAttribute("cy",i+n/2+""),e._element.setAttribute("r",n/2+"")}}))}},{key:"_basicSquare",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",o+""),e._element.setAttribute("y",i+""),e._element.setAttribute("width",n+""),e._element.setAttribute("height",n+"")}}))}},{key:"_basicSideRounded",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M ".concat(o," ").concat(i)+"v ".concat(n)+"h ".concat(n/2)+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, 0 ").concat(-n))}}))}},{key:"_basicCornerRounded",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M ".concat(o," ").concat(i)+"v ".concat(n)+"h ".concat(n)+"v ".concat(-n/2)+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(-n/2," ").concat(-n/2))}}))}},{key:"_basicCornerExtraRounded",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M ".concat(o," ").concat(i)+"v ".concat(n)+"h ".concat(n)+"a ".concat(n," ").concat(n,", 0, 0, 0, ").concat(-n," ").concat(-n))}}))}},{key:"_basicCornersRounded",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M ".concat(o," ").concat(i)+"v ".concat(n/2)+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(n/2," ").concat(n/2)+"h ".concat(n/2)+"v ".concat(-n/2)+"a ".concat(n/2," ").concat(n/2,", 0, 0, 0, ").concat(-n/2," ").concat(-n/2))}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:0})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:0})}},{key:"_drawRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0,u=i+a+s+c;if(0!==u)if(u>2||i&&a||s&&c)this._basicSquare({x:e,y:r,size:n,rotation:0});else{if(2===u){var h=0;return i&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&c&&(h=-Math.PI/2),void this._basicCornerRounded({x:e,y:r,size:n,rotation:h})}if(1===u){var l=0;return s?l=Math.PI/2:a?l=Math.PI:c&&(l=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,rotation:l})}}else this._basicDot({x:e,y:r,size:n,rotation:0})}},{key:"_drawExtraRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0,u=i+a+s+c;if(0!==u)if(u>2||i&&a||s&&c)this._basicSquare({x:e,y:r,size:n,rotation:0});else{if(2===u){var h=0;return i&&s?h=Math.PI/2:s&&a?h=Math.PI:a&&c&&(h=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:h})}if(1===u){var l=0;return s?l=Math.PI/2:a?l=Math.PI:c&&(l=-Math.PI/2),void this._basicSideRounded({x:e,y:r,size:n,rotation:l})}}else this._basicDot({x:e,y:r,size:n,rotation:0})}},{key:"_drawClassy",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0;0!==i+a+s+c?i||s?a||c?this._basicSquare({x:e,y:r,size:n,rotation:0}):this._basicCornerRounded({x:e,y:r,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:r,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,rotation:Math.PI/2})}},{key:"_drawClassyRounded",value:function(t){var e=t.x,r=t.y,n=t.size,o=t.getNeighbor,i=o?+o(-1,0):0,a=o?+o(1,0):0,s=o?+o(0,-1):0,c=o?+o(0,1):0;0!==i+a+s+c?i||s?a||c?this._basicSquare({x:e,y:r,size:n,rotation:0}):this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:r,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:r,size:n,rotation:Math.PI/2})}}]),t}(),I=function(){function t(e){var r=e.svg,n=e.type;s(this,t),this._element=void 0,this._svg=void 0,this._type=void 0,this._svg=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o;switch(this._type){case b.square:o=this._drawSquare;break;case b.extraRounded:o=this._drawExtraRounded;break;default:o=this._drawDot}o.call(this,{x:t,y:e,size:r,rotation:n})}},{key:"_rotateFigure",value:function(t){var e,r=t.size,n=t.rotation,o=void 0===n?0:n,i=t.x+r/2,a=t.y+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate(".concat(180*o/Math.PI,",").concat(i,",").concat(a,")"))}},{key:"_basicDot",value:function(t){var e=this,n=t.size,o=t.x,i=t.y,a=n/7;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M ".concat(o+n/2," ").concat(i)+"a ".concat(n/2," ").concat(n/2," 0 1 0 0.1 0")+"z"+"m 0 ".concat(a)+"a ".concat(n/2-a," ").concat(n/2-a," 0 1 1 -0.1 0")+"Z")}}))}},{key:"_basicSquare",value:function(t){var e=this,n=t.size,o=t.x,i=t.y,a=n/7;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M ".concat(o," ").concat(i)+"v ".concat(n)+"h ".concat(n)+"v ".concat(-n)+"z"+"M ".concat(o+a," ").concat(i+a)+"h ".concat(n-2*a)+"v ".concat(n-2*a)+"h ".concat(2*a-n)+"z")}}))}},{key:"_basicExtraRounded",value:function(t){var e=this,n=t.x,o=t.y,i=t.size/7;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M ".concat(n," ").concat(o+2.5*i)+"v ".concat(2*i)+"a ".concat(2.5*i," ").concat(2.5*i,", 0, 0, 0, ").concat(2.5*i," ").concat(2.5*i)+"h ".concat(2*i)+"a ".concat(2.5*i," ").concat(2.5*i,", 0, 0, 0, ").concat(2.5*i," ").concat(2.5*-i)+"v ".concat(-2*i)+"a ".concat(2.5*i," ").concat(2.5*i,", 0, 0, 0, ").concat(2.5*-i," ").concat(2.5*-i)+"h ".concat(-2*i)+"a ".concat(2.5*i," ").concat(2.5*i,", 0, 0, 0, ").concat(2.5*-i," ").concat(2.5*i)+"M ".concat(n+2.5*i," ").concat(o+i)+"h ".concat(2*i)+"a ".concat(1.5*i," ").concat(1.5*i,", 0, 0, 1, ").concat(1.5*i," ").concat(1.5*i)+"v ".concat(2*i)+"a ".concat(1.5*i," ").concat(1.5*i,", 0, 0, 1, ").concat(1.5*-i," ").concat(1.5*i)+"h ".concat(-2*i)+"a ".concat(1.5*i," ").concat(1.5*i,", 0, 0, 1, ").concat(1.5*-i," ").concat(1.5*-i)+"v ".concat(-2*i)+"a ".concat(1.5*i," ").concat(1.5*i,", 0, 0, 1, ").concat(1.5*i," ").concat(1.5*-i))}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:t.rotation})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:t.rotation})}},{key:"_drawExtraRounded",value:function(t){this._basicExtraRounded({x:t.x,y:t.y,size:t.size,rotation:t.rotation})}}]),t}(),A=function(){function t(e){var r=e.svg,n=e.type;s(this,t),this._element=void 0,this._svg=void 0,this._type=void 0,this._svg=r,this._type=n}return u(t,[{key:"draw",value:function(t,e,r,n){var o;if(this._type===k.square)o=this._drawSquare;else o=this._drawDot;o.call(this,{x:t,y:e,size:r,rotation:n})}},{key:"_rotateFigure",value:function(t){var e,r=t.size,n=t.rotation,o=void 0===n?0:n,i=t.x+r/2,a=t.y+r/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate(".concat(180*o/Math.PI,",").concat(i,",").concat(a,")"))}},{key:"_basicDot",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",o+n/2+""),e._element.setAttribute("cy",i+n/2+""),e._element.setAttribute("r",n/2+"")}}))}},{key:"_basicSquare",value:function(t){var e=this,n=t.size,o=t.x,i=t.y;this._rotateFigure(r(r({},t),{},{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",o+""),e._element.setAttribute("y",i+""),e._element.setAttribute("width",n+""),e._element.setAttribute("height",n+"")}}))}},{key:"_drawDot",value:function(t){this._basicDot({x:t.x,y:t.y,size:t.size,rotation:t.rotation})}},{key:"_drawSquare",value:function(t){this._basicSquare({x:t.x,y:t.y,size:t.size,rotation:t.rotation})}}]),t}(),q=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],R=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],E=function(){function t(e){s(this,t),this._element=void 0,this._defs=void 0,this._dotsClipPath=void 0,this._cornersSquareClipPath=void 0,this._cornersDotClipPath=void 0,this._options=void 0,this._qr=void 0,this._image=void 0,this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",e.width+""),this._element.setAttribute("height",e.height+""),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=e}var e;return u(t,[{key:"width",get:function(){return this._options.width}},{key:"height",get:function(){return this._options.height}},{key:"getElement",value:function(){return this._element}},{key:"clear",value:function(){var t,e=this._element;this._element=e.cloneNode(!1),null==e||null===(t=e.parentNode)||void 0===t||t.replaceChild(this._element,e),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs)}},{key:"drawQR",value:(e=a(n().mark((function t(e){var r,o,i,a,s=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.getModuleCount(),o=Math.floor((Math.min(this._options.width,this._options.height)-2*this._options.margin)/r),i={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=e,!this._options.image){t.next=14;break}return t.next=8,this.loadImage();case 8:if(this._image){t.next=10;break}return t.abrupt("return");case 10:i=w({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:Math.floor((a=this._options).imageOptions.imageSize*_[a.qrOptions.errorCorrectionLevel]*r*r),maxHiddenAxisDots:r-14,dotSize:o});case 14:this.clear(),this.drawBackground(),this.drawDots((function(t,e){var n,o,a,c,u,h;return!(s._options.imageOptions.hideBackgroundDots&&t>=(r-i.hideXDots)/2&&(r+i.hideXDots)/2>t&&e>=(r-i.hideYDots)/2&&(r+i.hideYDots)/2>e||(null===(n=q[t])||void 0===n?void 0:n[e])||(null===(o=q[t-r+7])||void 0===o?void 0:o[e])||(null===(a=q[t])||void 0===a?void 0:a[e-r+7])||(null===(c=R[t])||void 0===c?void 0:c[e])||(null===(u=R[t-r+7])||void 0===u?void 0:u[e])||(null===(h=R[t])||void 0===h?void 0:h[e-r+7]))})),this.drawCorners(),this._options.image&&this.drawImage({width:i.width,height:i.height,count:r,dotSize:o});case 19:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"drawBackground",value:function(){var t=this._options;if(this._element){var e,r,n=null===(e=t.backgroundOptions)||void 0===e?void 0:e.gradient,o=null===(r=t.backgroundOptions)||void 0===r?void 0:r.color;(n||o)&&this._createColor({options:n,color:o,additionalRotation:0,x:0,y:0,height:t.height,width:t.width,name:"background-color"})}}},{key:"drawDots",value:function(t){var e,r=this;if(!this._qr)throw"QR code is not defined";var n=this._options,o=this._qr.getModuleCount();if(o>n.width||o>n.height)throw"The canvas is too small.";var i=Math.floor((Math.min(n.width,n.height)-2*n.margin)/o),a=Math.floor((n.width-o*i)/2),s=Math.floor((n.height-o*i)/2),c=new z({svg:this._element,type:n.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(e=n.dotsOptions)||void 0===e?void 0:e.gradient,color:n.dotsOptions.color,additionalRotation:0,x:a,y:s,height:o*i,width:o*i,name:"dot-color"});for(var u=function(e){for(var n=function(n){var u;return t&&!t(e,n)?0:(null===(u=r._qr)||void 0===u?void 0:u.isDark(e,n))?(c.draw(a+e*i,s+n*i,i,(function(i,a){return e+i>=0&&n+a>=0&&o>e+i&&o>n+a&&(!(t&&!t(e+i,n+a))&&(!!r._qr&&r._qr.isDark(e+i,n+a)))})),void(c._element&&r._dotsClipPath&&r._dotsClipPath.appendChild(c._element))):0},u=0;o>u;u++)n(u)},h=0;o>h;h++)u(h)}},{key:"drawCorners",value:function(){var t=this;if(!this._qr)throw"QR code is not defined";var e=this._options;if(!this._element)throw"Element code is not defined";var r=this._qr.getModuleCount(),n=Math.floor((Math.min(e.width,e.height)-2*e.margin)/r),o=7*n,i=3*n,a=Math.floor((e.width-r*n)/2),s=Math.floor((e.height-r*n)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(c){var u,h,d,f,v,g,p,y,w,_,m=l(c,3),x=m[0],b=m[1],M=m[2],k=a+x*n*(r-7),S=s+b*n*(r-7),P=t._dotsClipPath,C=t._dotsClipPath;((null===(u=e.cornersSquareOptions)||void 0===u?void 0:u.gradient)||(null===(h=e.cornersSquareOptions)||void 0===h?void 0:h.color))&&((P=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-".concat(x,"-").concat(b)),t._defs.appendChild(P),t._cornersSquareClipPath=t._cornersDotClipPath=C=P,t._createColor({options:null===(p=e.cornersSquareOptions)||void 0===p?void 0:p.gradient,color:null===(y=e.cornersSquareOptions)||void 0===y?void 0:y.color,additionalRotation:M,x:k,y:S,height:o,width:o,name:"corners-square-color-".concat(x,"-").concat(b)}));if(null===(d=e.cornersSquareOptions)||void 0===d?void 0:d.type){var O=new I({svg:t._element,type:e.cornersSquareOptions.type});O.draw(k,S,o,M),O._element&&P&&P.appendChild(O._element)}else for(var D=new z({svg:t._element,type:e.dotsOptions.type}),E=function(t){for(var e=function(e){var r;if(!(null===(r=q[t])||void 0===r?void 0:r[e]))return 1;D.draw(k+t*n,S+e*n,n,(function(r,n){var o;return!!(null===(o=q[t+r])||void 0===o?void 0:o[e+n])})),D._element&&P&&P.appendChild(D._element)},r=0;q[t].length>r;r++)e(r)},L=0;q.length>L;L++)E(L);((null===(f=e.cornersDotOptions)||void 0===f?void 0:f.gradient)||(null===(v=e.cornersDotOptions)||void 0===v?void 0:v.color))&&((C=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-".concat(x,"-").concat(b)),t._defs.appendChild(C),t._cornersDotClipPath=C,t._createColor({options:null===(w=e.cornersDotOptions)||void 0===w?void 0:w.gradient,color:null===(_=e.cornersDotOptions)||void 0===_?void 0:_.color,additionalRotation:M,x:k+2*n,y:S+2*n,height:i,width:i,name:"corners-dot-color-".concat(x,"-").concat(b)}));if(null===(g=e.cornersDotOptions)||void 0===g?void 0:g.type){var B=new A({svg:t._element,type:e.cornersDotOptions.type});B.draw(k+2*n,S+2*n,i,M),B._element&&C&&C.appendChild(B._element)}else for(var T=new z({svg:t._element,type:e.dotsOptions.type}),N=function(t){for(var e=function(e){var r;if(!(null===(r=R[t])||void 0===r?void 0:r[e]))return 1;T.draw(k+t*n,S+e*n,n,(function(r,n){var o;return!!(null===(o=R[t+r])||void 0===o?void 0:o[e+n])})),T._element&&C&&C.appendChild(T._element)},r=0;R[t].length>r;r++)e(r)},j=0;R.length>j;j++)N(j)}))}},{key:"loadImage",value:function(){var t=this;return new Promise((function(e,r){var n=t._options,o=new Image;if(!n.image)return r("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(o.crossOrigin=n.imageOptions.crossOrigin),t._image=o,o.onload=function(){e()},o.src=n.image}))}},{key:"drawImage",value:function(t){var e=t.width,r=t.height,n=t.count,o=t.dotSize,i=this._options,a=Math.floor((i.width-n*o)/2)+i.imageOptions.margin+(n*o-e)/2,s=Math.floor((i.height-n*o)/2)+i.imageOptions.margin+(n*o-r)/2,c=e-2*i.imageOptions.margin,u=r-2*i.imageOptions.margin,h=document.createElementNS("http://www.w3.org/2000/svg","image");h.setAttribute("href",i.image||""),h.setAttribute("x",a+""),h.setAttribute("y",s+""),h.setAttribute("width","".concat(c,"px")),h.setAttribute("height","".concat(u,"px")),this._element.appendChild(h)}},{key:"_createColor",value:function(t){var e=t.options,r=t.color,n=t.additionalRotation,o=t.x,i=t.y,a=t.height,s=t.width,c=t.name,u=s>a?s:a,h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",o+""),h.setAttribute("y",i+""),h.setAttribute("height",a+""),h.setAttribute("width",s+""),h.setAttribute("clip-path","url('#clip-path-".concat(c,"')")),e){var l;if(e.type===P)(l=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",c),l.setAttribute("gradientUnits","userSpaceOnUse"),l.setAttribute("fx",o+s/2+""),l.setAttribute("fy",i+a/2+""),l.setAttribute("cx",o+s/2+""),l.setAttribute("cy",i+a/2+""),l.setAttribute("r",u/2+"");else{var d=((e.rotation||0)+n)%(2*Math.PI),f=(d+2*Math.PI)%(2*Math.PI),v=o+s/2,g=i+a/2,p=o+s/2,y=i+a/2;f>=0&&.25*Math.PI>=f||f>1.75*Math.PI&&2*Math.PI>=f?(v-=s/2,g-=a/2*Math.tan(d),p+=s/2,y+=a/2*Math.tan(d)):f>.25*Math.PI&&.75*Math.PI>=f?(g-=a/2,v-=s/2/Math.tan(d),y+=a/2,p+=s/2/Math.tan(d)):f>.75*Math.PI&&1.25*Math.PI>=f?(v+=s/2,g+=a/2*Math.tan(d),p-=s/2,y-=a/2*Math.tan(d)):f>1.25*Math.PI&&1.75*Math.PI>=f&&(g+=a/2,v+=s/2/Math.tan(d),y-=a/2,p-=s/2/Math.tan(d)),(l=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",c),l.setAttribute("gradientUnits","userSpaceOnUse"),l.setAttribute("x1",Math.round(v)+""),l.setAttribute("y1",Math.round(g)+""),l.setAttribute("x2",Math.round(p)+""),l.setAttribute("y2",Math.round(y)+"")}e.colorStops.forEach((function(t){var e=t.offset,r=t.color,n=document.createElementNS("http://www.w3.org/2000/svg","stop");n.setAttribute("offset","".concat(100*e,"%")),n.setAttribute("stop-color",r),l.appendChild(n)})),h.setAttribute("fill","url('#".concat(c,"')")),this._defs.appendChild(l)}else r&&h.setAttribute("fill",r);this._element.appendChild(h)}}]),t}(),L={canvas:"canvas",svg:"svg"},B={},T=0;40>=T;T++)B[T]=T;var N={L:"L",M:"M",Q:"Q",H:"H"},j={type:L.canvas,width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:B[0],mode:void 0,errorCorrectionLevel:N.Q},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{color:"#fff"}};function F(t){var e=r({},t);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation=e.rotation?Number(e.rotation):0,e.colorStops=e.colorStops.map((function(t){return r(r({},t),{},{offset:Number(t.offset)})})),e}function Q(t){var e=r({},t);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=r(r({},e.imageOptions),{},{hideBackgroundDots:!!e.imageOptions.hideBackgroundDots,imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=r({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=F(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=r({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=F(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=r({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=F(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=r({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=F(e.backgroundOptions.gradient))),e}var H=function(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}((function(t,e){var r=function(){var t=function(t,e){var r=t,n=h[e],o=null,i=0,a=null,s=[],c={},u=function(t,e){o=function(t){for(var e=Array(t),r=0;t>r;r+=1){e[r]=Array(t);for(var n=0;t>n;n+=1)e[r][n]=null}return e}(i=4*r+17),l(0,0),l(i-7,0),l(0,i-7),f(),d(),g(t,e),7>r||v(t),null==a&&(a=y(r,n,s)),p(a,e)},l=function(t,e){for(var r=-1;7>=r;r+=1)if(t+r>-1&&i>t+r)for(var n=-1;7>=n;n+=1)e+n>-1&&i>e+n&&(o[t+r][e+n]=!((0>r||r>6||0!=n&&6!=n)&&(0>n||n>6||0!=r&&6!=r)&&(2>r||r>4||2>n||n>4)))},d=function(){for(var t=8;i-8>t;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;i-8>e;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},f=function(){for(var t=_.getPatternPosition(r),e=0;t.length>e;e+=1)for(var n=0;t.length>n;n+=1){var i=t[e],a=t[n];if(null==o[i][a])for(var s=-2;2>=s;s+=1)for(var c=-2;2>=c;c+=1)o[i+s][a+c]=-2==s||2==s||-2==c||2==c||0==s&&0==c}},v=function(t){for(var e=_.getBCHTypeNumber(r),n=0;18>n;n+=1){var a=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+i-8-3]=a}for(n=0;18>n;n+=1){a=!t&&1==(e>>n&1);o[n%3+i-8-3][Math.floor(n/3)]=a}},g=function(t,e){for(var r=_.getBCHTypeInfo(n<<3|e),a=0;15>a;a+=1){var s=!t&&1==(r>>a&1);6>a?o[a][8]=s:8>a?o[a+1][8]=s:o[i-15+a][8]=s}for(a=0;15>a;a+=1){s=!t&&1==(r>>a&1);8>a?o[8][i-a-1]=s:9>a?o[8][15-a-1+1]=s:o[8][15-a-1]=s}o[i-8][8]=!t},p=function(t,e){for(var r=-1,n=i-1,a=7,s=0,c=_.getMaskFunction(e),u=i-1;u>0;u-=2)for(6==u&&(u-=1);;){for(var h=0;2>h;h+=1)if(null==o[n][u-h]){var l=!1;t.length>s&&(l=1==(t[s]>>>a&1)),c(n,u-h)&&(l=!l),o[n][u-h]=l,-1==(a-=1)&&(s+=1,a=7)}if(0>(n+=r)||n>=i){n-=r,r=-r;break}}},y=function(t,e,r){for(var n=b.getRSBlocks(t,e),o=M(),i=0;r.length>i;i+=1){var a=r[i];o.put(a.getMode(),4),o.put(a.getLength(),_.getLengthInBits(a.getMode(),t)),a.write(o)}var s=0;for(i=0;n.length>i;i+=1)s+=n[i].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4>8*s||o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;o.getLengthInBits()<8*s&&(o.put(236,8),o.getLengthInBits()<8*s);)o.put(17,8);return function(t,e){for(var r=0,n=0,o=0,i=Array(e.length),a=Array(e.length),s=0;e.length>s;s+=1){var c=e[s].dataCount,u=e[s].totalCount-c;n=Math.max(n,c),o=Math.max(o,u),i[s]=Array(c);for(var h=0;i[s].length>h;h+=1)i[s][h]=255&t.getBuffer()[h+r];r+=c;var l=_.getErrorCorrectPolynomial(u),d=x(i[s],l.getLength()-1).mod(l);for(a[s]=Array(l.getLength()-1),h=0;a[s].length>h;h+=1){var f=h+d.getLength()-a[s].length;a[s][h]=0>f?0:d.getAt(f)}}var v=0;for(h=0;e.length>h;h+=1)v+=e[h].totalCount;var g=Array(v),p=0;for(h=0;n>h;h+=1)for(s=0;e.length>s;s+=1)i[s].length>h&&(g[p]=i[s][h],p+=1);for(h=0;o>h;h+=1)for(s=0;e.length>s;s+=1)a[s].length>h&&(g[p]=a[s][h],p+=1);return g}(o,n)};c.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=k(t);break;case"Alphanumeric":r=S(t);break;case"Byte":r=P(t);break;case"Kanji":r=C(t);break;default:throw"mode:"+e}s.push(r),a=null},c.isDark=function(t,e){if(0>t||t>=i||0>e||e>=i)throw t+","+e;return o[t][e]},c.getModuleCount=function(){return i},c.make=function(){if(1>r){for(var t=1;40>t;t++){for(var e=b.getRSBlocks(t,n),o=M(),i=0;s.length>i;i++){var a=s[i];o.put(a.getMode(),4),o.put(a.getLength(),_.getLengthInBits(a.getMode(),t)),a.write(o)}var h=0;for(i=0;e.length>i;i++)h+=e[i].dataCount;if(o.getLengthInBits()<=8*h)break}r=t}u(!1,function(){for(var t=0,e=0,r=0;8>r;r+=1){u(!0,r);var n=_.getLostPoint(c);(0==r||t>n)&&(t=n,e=r)}return e}())},c.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var n=0;n<c.getModuleCount();n+=1){r+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=c.isDark(n,o)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},c.createSvgTag=function(t,e,r,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,r=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var i,a,s,u,h=c.getModuleCount()*t+2*e,l="";for(u="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=o.scalable?"":' width="'+h+'px" height="'+h+'px"',l+=' viewBox="0 0 '+h+" "+h+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=n.text||r.text?' role="img" aria-labelledby="'+w([n.id,r.id].join(" ").trim())+'"':"",l+=">",l+=n.text?'<title id="'+w(n.id)+'">'+w(n.text)+"</title>":"",l+=r.text?'<description id="'+w(r.id)+'">'+w(r.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',a=0;a<c.getModuleCount();a+=1)for(s=a*t+e,i=0;i<c.getModuleCount();i+=1)c.isDark(a,i)&&(l+="M"+(i*t+e)+","+s+u);return l+='" stroke="transparent" fill="black"/>',l+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=c.getModuleCount()*t+2*e,n=e,o=r-e;return z(r,r,(function(e,r){if(e>=n&&o>e&&r>=n&&o>r){var i=Math.floor((e-n)/t);return c.isDark(Math.floor((r-n)/t),i)?0:1}return 1}))},c.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=c.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',r&&(o+=' alt="',o+=w(r),o+='"'),o+="/>"};var w=function(t){for(var e="",r=0;t.length>r;r+=1){var n=t.charAt(r);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return c.createASCII=function(t,e){if(2>(t=t||1))return function(t){t=void 0===t?2:t;var e,r,n,o,i,a=1*c.getModuleCount()+2*t,s=t,u=a-t,h={"":""," ":""," ":"","  ":" "},l={"":""," ":""," ":" ","  ":" "},d="";for(e=0;a>e;e+=2){for(n=Math.floor((e-s)/1),o=Math.floor((e+1-s)/1),r=0;a>r;r+=1)i="",r>=s&&u>r&&e>=s&&u>e&&c.isDark(n,Math.floor((r-s)/1))&&(i=" "),r>=s&&u>r&&e+1>=s&&u>e+1&&c.isDark(o,Math.floor((r-s)/1))?i+=" ":i+="",d+=1>t&&e+1>=u?l[i]:h[i];d+="\n"}return a%2&&t>0?d.substring(0,d.length-a-1)+Array(a+1).join(""):d.substring(0,d.length-1)}(e);t-=1,e=void 0===e?2*t:e;var r,n,o,i,a=c.getModuleCount()*t+2*e,s=e,u=a-e,h=Array(t+1).join(""),l=Array(t+1).join("  "),d="",f="";for(r=0;a>r;r+=1){for(o=Math.floor((r-s)/t),f="",n=0;a>n;n+=1)i=1,n>=s&&u>n&&r>=s&&u>r&&c.isDark(o,Math.floor((n-s)/t))&&(i=0),f+=i?h:l;for(o=0;t>o;o+=1)d+=f+"\n"}return d.substring(0,d.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var r=c.getModuleCount(),n=0;r>n;n++)for(var o=0;r>o;o++)t.fillStyle=c.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;t.length>r;r+=1){var n=t.charCodeAt(r);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=D(t),n=function(){var t=r.read();if(-1==t)throw"eof";return t},o=0,i={};;){var a=r.read();if(-1==a)break;var s=n(),c=n(),u=n();i[String.fromCharCode(a<<8|s)]=c<<8|u,o+=1}if(o!=e)throw o+" != "+e;return i}();return function(t){for(var e=[],n=0;t.length>n;n+=1){var o=t.charCodeAt(n);if(128>o)e.push(o);else{var i=r[t.charAt(n)];"number"==typeof i?(255&i)==i?e.push(i):(e.push(i>>>8),e.push(255&i)):e.push(63)}}return e}};var e,r,n,o,i,a=1,s=2,c=4,u=8,h={L:1,M:0,Q:3,H:2},l=0,d=1,f=2,v=3,g=4,p=5,y=6,w=7,_=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,n=7973,i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(r)>=0;)e^=r<<i(e)-i(r);return 21522^(t<<10|e)},o.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(n)>=0;)e^=n<<i(e)-i(n);return t<<12|e},o.getPatternPosition=function(t){return e[t-1]},o.getMaskFunction=function(t){switch(t){case l:return function(t,e){return(t+e)%2==0};case d:return function(t,e){return t%2==0};case f:return function(t,e){return e%3==0};case v:return function(t,e){return(t+e)%3==0};case g:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case p:return function(t,e){return t*e%2+t*e%3==0};case y:return function(t,e){return(t*e%2+t*e%3)%2==0};case w:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},o.getErrorCorrectPolynomial=function(t){for(var e=x([1],0),r=0;t>r;r+=1)e=e.multiply(x([1,m.gexp(r)],0));return e},o.getLengthInBits=function(t,e){if(e>=1&&10>e)switch(t){case a:return 10;case s:return 9;case c:case u:return 8;default:throw"mode:"+t}else if(27>e)switch(t){case a:return 12;case s:return 11;case c:return 16;case u:return 10;default:throw"mode:"+t}else{if(e>=41)throw"type:"+e;switch(t){case a:return 14;case s:return 13;case c:return 16;case u:return 12;default:throw"mode:"+t}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,n=0;e>n;n+=1)for(var o=0;e>o;o+=1){for(var i=0,a=t.isDark(n,o),s=-1;1>=s;s+=1)if(n+s>=0&&e>n+s)for(var c=-1;1>=c;c+=1)o+c>=0&&e>o+c&&(0==s&&0==c||a==t.isDark(n+s,o+c)&&(i+=1));i>5&&(r+=3+i-5)}for(n=0;e-1>n;n+=1)for(o=0;e-1>o;o+=1){var u=0;t.isDark(n,o)&&(u+=1),t.isDark(n+1,o)&&(u+=1),t.isDark(n,o+1)&&(u+=1),t.isDark(n+1,o+1)&&(u+=1),0!=u&&4!=u||(r+=3)}for(n=0;e>n;n+=1)for(o=0;e-6>o;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(o=0;e>o;o+=1)for(n=0;e-6>n;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);var h=0;for(o=0;e>o;o+=1)for(n=0;e>n;n+=1)t.isDark(n,o)&&(h+=1);return r+=Math.abs(100*h/e/e-50)/5*10},o),m=function(){for(var t=Array(256),e=Array(256),r=0;8>r;r+=1)t[r]=1<<r;for(r=8;256>r;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;255>r;r+=1)e[t[r]]=r;var n={glog:function(t){if(1>t)throw"glog("+t+")";return e[t]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function x(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;t.length>r&&0==t[r];)r+=1;for(var n=Array(t.length-r+e),o=0;t.length-r>o;o+=1)n[o]=t[o+r];return n}(),n={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=Array(n.getLength()+t.getLength()-1),r=0;r<n.getLength();r+=1)for(var o=0;o<t.getLength();o+=1)e[r+o]^=m.gexp(m.glog(n.getAt(r))+m.glog(t.getAt(o)));return x(e,0)},mod:function(t){if(0>n.getLength()-t.getLength())return n;for(var e=m.glog(n.getAt(0))-m.glog(t.getAt(0)),r=Array(n.getLength()),o=0;o<n.getLength();o+=1)r[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)r[o]^=m.gexp(m.glog(t.getAt(o))+e);return x(r,0).mod(t)}};return n}var b=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={};return r.getRSBlocks=function(r,n){var o=function(e,r){switch(r){case h.L:return t[4*(e-1)+0];case h.M:return t[4*(e-1)+1];case h.Q:return t[4*(e-1)+2];case h.H:return t[4*(e-1)+3];default:return}}(r,n);if(void 0===o)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+n;for(var i=o.length/3,a=[],s=0;i>s;s+=1)for(var c=o[3*s+0],u=o[3*s+1],l=o[3*s+2],d=0;c>d;d+=1)a.push(e(u,l));return a},r}(),M=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){return 1==(t[Math.floor(e/8)]>>>7-e%8&1)},put:function(t,e){for(var n=0;e>n;n+=1)r.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(r){var n=Math.floor(e/8);t.length>n||t.push(0),r&&(t[n]|=128>>>e%8),e+=1}};return r},k=function(t){var e=a,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;e.length>n+2;)t.put(o(e.substring(n,n+3)),10),n+=3;e.length>n&&(e.length-n==1?t.put(o(e.substring(n,n+1)),4):e.length-n==2&&t.put(o(e.substring(n,n+2)),7))}},o=function(t){for(var e=0,r=0;t.length>r;r+=1)e=10*e+i(t.charAt(r));return e},i=function(t){if(t>="0"&&"9">=t)return t.charCodeAt(0)-48;throw"illegal char :"+t};return n},S=function(t){var e=s,r=t,n={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,n=0;e.length>n+1;)t.put(45*o(e.charAt(n))+o(e.charAt(n+1)),11),n+=2;e.length>n&&t.put(o(e.charAt(n)),6)}},o=function(t){if(t>="0"&&"9">=t)return t.charCodeAt(0)-48;if(t>="A"&&"Z">=t)return t.charCodeAt(0)-65+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},P=function(e){var r=c,n=t.stringToBytes(e),o={getMode:function(){return r},getLength:function(t){return n.length},write:function(t){for(var e=0;n.length>e;e+=1)t.put(n[e],8)}};return o},C=function(e){var r=u,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var r=n("");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var o=n(e),i={getMode:function(){return r},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,r=0;e.length>r+1;){var n=(255&e[r])<<8|255&e[r+1];if(n<33088||40956<n){if(57408>n||n>60351)throw"illegal char at "+(r+1)+"/"+n;n-=49472}else n-=33088;t.put(n=192*(n>>>8&255)+(255&n),13),r+=2}if(e.length>r)throw"illegal char at "+(r+1)}};return i},O=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,n){r=r||0,n=n||t.length;for(var o=0;n>o;o+=1)e.writeByte(t[o+r])},writeString:function(t){for(var r=0;t.length>r;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;t.length>r;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},D=function(t){var e=t,r=0,n=0,o=0,i={read:function(){for(;8>o;){if(r>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(r);if(r+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|a(t.charCodeAt(0)),o+=6)}var i=n>>>o-8&255;return o-=8,i}},a=function(t){if(65>t||t>90){if(97>t||t>122){if(48>t||t>57){if(43==t)return 62;if(47==t)return 63;throw"c:"+t}return t-48+52}return t-97+26}return t-65};return i},z=function(t,e,r){for(var n=function(t,e){var r=t,n=e,o=Array(t*e),i={setPixel:function(t,e,n){o[e*r+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(n),t.writeByte(0);var e=a(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,r=1+(1<<t),n=t+1,i=s(),a=0;e>a;a+=1)i.add(String.fromCharCode(a));i.add(String.fromCharCode(e)),i.add(String.fromCharCode(r));var c,u,h,l=O(),d=(c=l,u=0,h=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;u+e>=8;)c.writeByte(255&(t<<u|h)),e-=8-u,t>>>=8-u,h=0,u=0;h|=t<<u,u+=e},flush:function(){u>0&&c.writeByte(h)}});d.write(e,n);var f=0,v=String.fromCharCode(o[f]);for(f+=1;o.length>f;){var g=String.fromCharCode(o[f]);f+=1,i.contains(v+g)?v+=g:(d.write(i.indexOf(v),n),4095>i.size()&&(i.size()==1<<n&&(n+=1),i.add(v+g)),v=g)}return d.write(i.indexOf(v),n),d.write(r,n),d.flush(),l.toByteArray()},s=function(){var t={},e=0,r={add:function(n){if(r.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return i}(t,e),o=0;e>o;o+=1)for(var i=0;t>i;i+=1)n.setPixel(i,o,r(i,o));var a=O();n.write(a);for(var s=function(){var t=0,e=0,r=0,n="",o={},i=function(t){n+=String.fromCharCode(a(63&t))},a=function(t){if(0>t);else{if(26>t)return 65+t;if(52>t)return t-26+97;if(62>t)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,r+=1;e>=6;)i(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(i(t<<6-e),t=0,e=0),r%3!=0)for(var o=3-r%3,a=0;o>a;a+=1)n+="="},o.toString=function(){return n},o}(),c=a.toByteArray(),u=0;c.length>u;u+=1)s.writeByte(c[u]);return s.flush(),"data:image/gif;base64,"+s};return t}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;t.length>r;r++){var n=t.charCodeAt(r);128>n?e.push(n):2048>n?e.push(192|n>>6,128|63&n):55296>n||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},t.exports=r})),G=function(){function t(e){s(this,t),this._options=void 0,this._container=void 0,this._canvas=void 0,this._svg=void 0,this._qr=void 0,this._canvasDrawingPromise=void 0,this._svgDrawingPromise=void 0,this._options=e?Q(p(j,e)):j,this.update()}var e,r,i;return u(t,[{key:"_getQRStylingElement",value:(i=a(n().mark((function t(){var e,r,o,i,a,s=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:"png",this._qr){t.next=3;break}throw"QR code is empty";case 3:if("svg"!==e.toLowerCase()){t.next=10;break}return this._svg&&this._svgDrawingPromise?(o=this._svg,r=this._svgDrawingPromise):(o=new E(this._options),r=o.drawQR(this._qr)),t.next=7,r;case 7:return t.abrupt("return",o);case 10:return this._canvas&&this._canvasDrawingPromise?(a=this._canvas,i=this._canvasDrawingPromise):(a=new D(this._options),i=a.drawQR(this._qr)),t.next=13,i;case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"update",value:function(e){t._clearContainer(this._container),this._options=e?Q(p(this._options,e)):this._options,this._options.data&&(this._qr=H(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return v.numeric;case/^[0-9A-Z $%*+\-./:]*$/.test(t):return v.alphanumeric;default:return v.byte}}(this._options.data)),this._qr.make(),this._options.type===L.canvas?(this._canvas=new D(this._options),this._canvasDrawingPromise=this._canvas.drawQR(this._qr),this._svgDrawingPromise=void 0,this._svg=void 0):(this._svg=new E(this._options),this._svgDrawingPromise=this._svg.drawQR(this._qr),this._canvasDrawingPromise=void 0,this._canvas=void 0),this.append(this._container))}},{key:"append",value:function(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===L.canvas?this._canvas&&t.appendChild(this._canvas.getCanvas()):this._svg&&t.appendChild(this._svg.getElement()),this._container=t}}},{key:"getRawData",value:(r=a(n().mark((function t(){var e,r,o,i,a=arguments;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:"png",this._qr){t.next=3;break}throw"QR code is empty";case 3:return t.next=5,this._getQRStylingElement(e);case 5:if(r=t.sent,"svg"!==e.toLowerCase()){t.next=12;break}return o=new XMLSerializer,i=o.serializeToString(r.getElement()),t.abrupt("return",new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+i],{type:"image/svg+xml"}));case 12:return t.abrupt("return",new Promise((function(t){return r.getCanvas().toBlob(t,"image/".concat(e),1)})));case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"download",value:(e=a(n().mark((function t(e){var r,i,a,s,c;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._qr){t.next=2;break}throw"QR code is empty";case 2:return r="png",i="qr","string"==typeof e?(r=e,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"===o(e)&&null!==e&&(e.name&&(i=e.name),e.extension&&(r=e.extension)),t.next=7,this._getQRStylingElement(r);case 7:a=t.sent,"svg"===r.toLowerCase()?(s=new XMLSerializer,c=s.serializeToString(a.getElement()),y("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(c='<?xml version="1.0" standalone="no"?>\r\n'+c),"".concat(i,".svg"))):y(a.getCanvas().toDataURL("image/".concat(r)),"".concat(i,".").concat(r));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}],[{key:"_clearContainer",value:function(t){t&&(t.innerHTML="")}}]),t}();t.cornerDotTypes=k,t.cornerSquareTypes=b,t.default=G,t.dotTypes=m,t.drawTypes=L,t.errorCorrectionLevels=N,t.errorCorrectionPercents=_,t.modes=v,t.qrTypes=B,Object.defineProperty(t,"__esModule",{value:!0})}));
